generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model School {
  id                Int         @id @default(autoincrement())
  moe_code          Int         @unique //! ต้อง unique เท่านั้น เวลา ใช้เป็น fp ของต่างตาราง นอกจาก id
  smis_code         Int         @unique //! ต้อง unique เท่านั้น เวลา ใช้เป็น fp ของต่างตาราง นอกจาก id
  obec_code         Int         @unique //! ต้อง unique เท่านั้น เวลา ใช้เป็น fp ของต่างตาราง นอกจาก id
  school_name       String
  type_code         Int  //รหัส ประเภทโรงเรียน /1 ประถม /2 ขยายโอกาส
  type_education    String // ประเภทการศึกษาที่เปิดชั้นเรียน
  district_code     Int // รหัสอำเภอ
  district          String //อำเภอ
  school_group_code Int // รหัสศูนย์พัฒนาวิชาการ
  school_group      String //ศูนย์พัฒนาวิชาการ
  moo               String // บ้านเลขที่พร้อมหมู่บ้าน
  sub_distric       String //ตำบล
  zip_code          String // รหัสไปรษณีย์
  lat               String
  long              String
  status            String // สถานะการเปิด-ปิดโรงเรียน 1 คือ ปกติ 0 คือ เลิกสถานศึกษา
  onetp6s           Onetp6[]
  onetm3s           Onetm3[]
  nts               Nt[]
  schoolmis         Schoolmis[]
}

model Onetp6 {
  id            Int    @id @default(autoincrement())
  smis_code     Int
  moe_code      Int
  school_name   String
  year_exam     String // ปีการศึกษาที่สอบ
  score_th      String
  score_sci     String
  score_math    String
  score_eng     String
  score_average String

  //! ถ้าต้องการใช้ id เชื่อมความสัมพันธ์ ต้องมี สองชื่อฟีล์ด แบบนี้ และเชื่อมต่อ school
  //? schoolId   Int
  //? school     School @relation(fields: [schoolId], references: [id])
  school School @relation(fields: [smis_code], references: [smis_code])
}

model Onetm3 {
  id            Int    @id @default(autoincrement())
  smis_code     Int
  moe_code     Int
  school_name   String
  year_exam     String // ปีการศึกษาที่สอบ
  score_th      String
  score_sci     String
  score_math    String
  score_eng     String
  score_average String

  //! ถ้าต้องการใช้ id เชื่อมความสัมพันธ์ ต้องมี สองชื่อฟีล์ด แบบนี้ และเชื่อมต่อ school
  //? schoolId   Int
  //? school     School @relation(fields: [schoolId], references: [id])
  school School @relation(fields: [smis_code], references: [smis_code])
}

model Nt {
  id          Int    @id @default(autoincrement())
  smis_code   Int
  moe_code   Int
  school_name String
  year_exam   String // ปีการศึกษาที่สอบ
  math_avg    String
  math_sd     String
  th_avg      String
  th_sd       String
  total_avg   String
  total_sd    String

  //! ถ้าต้องการใช้ id เชื่อมความสัมพันธ์ ต้องมี สองชื่อฟีล์ด แบบนี้ และเชื่อมต่อ school
  //? schoolId   Int
  //? school     School @relation(fields: [schoolId], references: [id])
  // ใช้รหัส smis เชื่อมต่อกับ school
  school School @relation(fields: [smis_code], references: [smis_code])
}

model Schoolmis {
  id          Int    @id @default(autoincrement())
  year_data   String
  smis_code   Int
  moe_code   Int
  school_name String

  //อนุบาล nursery แปลว่า ศูนย์เด็กเล็กหรืออนุบาล
  nursery1_male        String
  nursery1_female      String
  nursery1_total       String
  nursery1_room        String
  nursery2_male        String
  nursery2_female      String
  nursery2_total       String
  nursery2_room        String
  nursery3_male        String
  nursery3_female      String
  nursery3_total       String
  nursery3_room        String
  nursery_male_total   String
  nursery_female_total String
  nursery_total        String
  nursery_room_total   String

  //primary แปลว่า ประถมศึกษา
  primary1_male        String
  primary1_female      String
  primary1_total       String
  primary1_room        String
  primary2_male        String
  primary2_female      String
  primary2_total       String
  primary2_room        String
  primary3_male        String
  primary3_female      String
  primary3_total       String
  primary3_room        String
  primary4_male        String
  primary4_female      String
  primary4_total       String
  primary4_room        String
  primary5_male        String
  primary5_female      String
  primary5_total       String
  primary5_room        String
  primary6_male        String
  primary6_female      String
  primary6_total       String
  primary6_room        String
  primary_male_total   String
  primary_female_total String
  primary_total        String
  primary_room_total   String

  //secondary แปลว่า มัธยมศึกษาตอนต้น
  //lower secondary มัธยมศึกษาตอนต้น
  secondary1_male              String
  secondary1_female            String
  secondary1_total             String
  secondary1_room              String
  secondary2_male              String
  secondary2_female            String
  secondary2_total             String
  secondary2_room              String
  secondary3_male              String
  secondary3_female            String
  secondary3_total             String
  secondary3_room              String
  lower_secondary_male_total   String
  lower_secondary_female_total String
  lower_secondary_total        String
  lower_secondary_room_total   String

  //upper secondary มัธยมศึกษาตอนปลาย
  secondary4_male              String
  secondary4_female            String
  secondary4_total             String
  secondary4_room              String
  secondary5_male              String
  secondary5_female            String
  secondary5_total             String
  secondary5_room              String
  secondary6_male              String
  secondary6_female            String
  secondary6_total             String
  secondary6_room              String
  upper_secondary_male_total   String
  upper_secondary_female_total String
  upper_secondary_total        String
  upper_secondary_room_total   String

  //รวมทั้งหมด
  total_male   String
  total_female String
  total_all    String
  total_room   String

  // ใช้รหัส smis เชื่อมต่อกับ school
  school School @relation(fields: [smis_code], references: [smis_code])
}
